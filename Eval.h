#pragma once
#include "Typedefs.h"
namespace hce {
    constexpr int PHASE_PIECE_VALUES[5] = {4,2,1,1,0};
    constexpr const static eval_t MATE_VALUE = 1048576;
    constexpr packed_eval_t king_psts[] = {347892416406ULL, 377957187535ULL, 281217278738420ULL, 280903746060292ULL, 280860796387352ULL, 280611688284201ULL, 280774897041422ULL, 281337537822594ULL, 519691108277ULL, 81604444157ULL, 281324652855322ULL, 280839321550903ULL, 280783486976081ULL, 281363307561032ULL, 281036890046528ULL, 281247343509457ULL, 326417579990ULL, 281457796841489ULL, 280920925929533ULL, 280620278218848ULL, 280684702728303ULL, 280877976256616ULL, 280727652401238ULL, 281466386841569ULL, 281071249850357ULL, 281208688738340ULL, 280830731616338ULL, 280422709723256ULL, 280349695279236ULL, 280753422205049ULL, 281453501874232ULL, 280603098349614ULL, 68719542218ULL, 281195803836457ULL, 280877976256593ULL, 280444184559735ULL, 280444184559747ULL, 281015415210104ULL, 281127084359769ULL, 280993940373518ULL, 281251638476786ULL, 281328947822618ULL, 280895156125763ULL, 280710472532065ULL, 280714767499385ULL, 77309411436ULL, 281165739065452ULL, 281401962266640ULL, 377957187525ULL, 201863528443ULL, 281221573640226ULL, 280680407760974ULL, 280727652401259ULL, 281419142135914ULL, 281470681743451ULL, 236223201286ULL, 382252154773ULL, 266288037853ULL, 281097019588623ULL, 280512904036403ULL, 280560148676673ULL, 281178623967289ULL, 281376192462886ULL, 618475356007ULL};
    constexpr packed_eval_t piece_type_psts[][64] = {
            {6326486828795ULL, 6339371730697ULL, 6347961665297ULL, 6365141534500ULL, 6347961665326ULL, 6468220749597ULL, 6463925782285ULL, 6193342842697ULL, 6244882450188ULL, 6373731469072ULL, 6403796240174ULL, 6352256632663ULL, 6382321403731ULL, 6455335847738ULL, 6305011992404ULL, 6262062319452ULL, 6296422057745ULL, 6446745913099ULL, 6365141534549ULL, 6343666698088ULL, 6412386174828ULL, 6442450945921ULL, 6356551600011ULL, 6506875455347ULL, 6408091207426ULL, 6446745913117ULL, 6356551599955ULL, 6403796240264ULL, 6403796240276ULL, 6558415062915ULL, 6313601927079ULL, 6747393623900ULL, 6347961665290ULL, 6433861011233ULL, 6378026436440ULL, 6395206305669ULL, 6420976109481ULL, 6601364735896ULL, 6356551600066ULL, 6725918787421ULL, 6253472384775ULL, 6498285520629ULL, 6429566043977ULL, 6390911338358ULL, 6519760357264ULL, 6906307413876ULL, 6622839572351ULL, 6850472838973ULL, 6433861011148ULL, 6541235193540ULL, 6519760357155ULL, 6472515716948ULL, 6515465389943ULL, 6914897348405ULL, 6476810684258ULL, 6940667152125ULL, 6390911338181ULL, 6631429506699ULL, 6476810684173ULL, 6493990553405ULL, 6558415062865ULL, 6889127544610ULL, 6790343296825ULL, 6515465389879ULL},
            {2654289789948ULL, 2516850836483ULL, 2538325672972ULL, 2585570313235ULL, 2727304234015ULL, 2838973383707ULL, 2989297239066ULL, 3126736192537ULL, 2662879724555ULL, 2607045149705ULL, 2607045149707ULL, 2602750182427ULL, 2821793514524ULL, 2989297239072ULL, 2985002271790ULL, 3062311683110ULL, 2731599201304ULL, 2714419332106ULL, 2667174691851ULL, 2680059593758ULL, 2838973383723ULL, 3006477108258ULL, 3126736192564ULL, 3118146257972ULL, 2770253906966ULL, 2688649528334ULL, 2667174691858ULL, 2770253906972ULL, 2903397893157ULL, 3032246912031ULL, 3272765080613ULL, 3152505996334ULL, 2800318678025ULL, 2718714299391ULL, 2701534430219ULL, 2765958939669ULL, 2942052598796ULL, 3234110374921ULL, 3169685865510ULL, 3285649982494ULL, 2727304233985ULL, 2735894168569ULL, 2688649528318ULL, 2658584757266ULL, 2946347566082ULL, 3242700309502ULL, 3375844295693ULL, 3393024164877ULL, 2834678416378ULL, 2856153252841ULL, 2933462664156ULL, 2826088481788ULL, 3006477108221ULL, 3513283249136ULL, 3277060047879ULL, 3268470113297ULL, 2662879724527ULL, 2645699855347ULL, 2774548874205ULL, 2765958939636ULL, 3027951944690ULL, 3345779524585ULL, 3500398347248ULL, 3423088935943ULL},
            {2100239008293ULL, 2259152798272ULL, 2246267896394ULL, 2168958485067ULL, 2216203125330ULL, 2272037700186ULL, 2203318223401ULL, 2087354106431ULL, 2246267896386ULL, 2267742732866ULL, 2293512536668ULL, 2263447765608ULL, 2319282340461ULL, 2448131359312ULL, 2379411882569ULL, 1954210120273ULL, 2134598746658ULL, 2349347111486ULL, 2293512536680ULL, 2306397438581ULL, 2478196130403ULL, 2448131359330ULL, 2332167242320ULL, 2031519531598ULL, 2070174237254ULL, 2194728288856ULL, 2314987373160ULL, 2456721293934ULL, 2551210574457ULL, 2619930051151ULL, 2207613190741ULL, 1735166788196ULL, 2104533975615ULL, 2246267896411ULL, 2327872275055ULL, 2430951490158ULL, 2529735737965ULL, 2525440770648ULL, 2418066588230ULL, 1816771166809ULL, 2095944041025ULL, 2340757176902ULL, 2289217569384ULL, 2323577307756ULL, 2499670966888ULL, 2753074037337ULL, 2418066588226ULL, 1941325218377ULL, 2280627634729ULL, 2383706849867ULL, 2306397438540ULL, 2263447765603ULL, 2323577307752ULL, 2581275345485ULL, 2357937046096ULL, 2160368550462ULL, 2177548419599ULL, 2293512536608ULL, 2332167242297ULL, 2229088027194ULL, 2220498092626ULL, 2491081032269ULL, 2276332667430ULL, 1889785610812ULL},
            {1382979469821ULL, 1692217115146ULL, 1791001362968ULL, 1924145349171ULL, 2022929596975ULL, 2048699400734ULL, 1941325218307ULL, 949187772849ULL,  1765231559144ULL, 1782411428388ULL, 1949915152951ULL, 2035814498882ULL, 2117418877523ULL, 2297807503927ULL, 2070174237222ULL, 1219770712592ULL, 1675037245977ULL, 1898375545395ULL, 2048699400776ULL, 2143188681321ULL, 2297807503974ULL, 2426656522834ULL, 2254857830963ULL, 1687922147879ULL, 1782411428383ULL, 1984274891321ULL, 2074469204574ULL, 2151778615913ULL, 2448131359337ULL, 2508260901459ULL, 2379411882546ULL, 1915555414553ULL, 1812476199456ULL, 1992864825911ULL, 2156073583196ULL, 2216203125358ULL, 2319282340459ULL, 2783138808376ULL, 2263447765541ULL, 2151778615837ULL, 1902670512653ULL, 2010044695087ULL, 2078764171841ULL, 2181843386973ULL, 2499670966880ULL, 2787433775664ULL, 2714419331596ULL, 1735166788088ULL, 1782411428340ULL, 1915555414549ULL, 2104533975598ULL, 2173253452358ULL, 2194728288849ULL, 2469606195749ULL, 2061584302624ULL, 1374389535256ULL, 1597727834603ULL, 1889785610779ULL, 1906965479963ULL, 2001454760484ULL, 2267742732835ULL, 2241972929037ULL, 2224793059818ULL, 1365799600522ULL},
            {0ULL,             244813136087ULL,  240518168783ULL,  253403070681ULL,  330712482050ULL,  446676599156ULL,  1039382086100ULL, 0ULL,             0ULL,             425201762520ULL,  420906795217ULL,  450971566292ULL,  506806141168ULL,  545460846978ULL,  1198295876038ULL, 0ULL,             0ULL,             395136991426ULL,  420906795189ULL,  442381631671ULL,  532575944911ULL,  781684048200ULL,  1035087118791ULL, 0ULL,             0ULL,             322122547404ULL,  429496729801ULL,  558345748657ULL,  545460846784ULL,  824633721125ULL,  1245540516215ULL, 0ULL,             0ULL,             463856468180ULL,  536870912189ULL,  562640715950ULL,  700079669425ULL,  846108557591ULL,  1125281431920ULL, 0ULL,             0ULL,             575525617857ULL,  455266533560ULL,  506806141105ULL,  639950127287ULL,  1000727380222ULL, 1005022347649ULL, 0ULL,             0ULL,             738734375103ULL,  674309865664ULL,  571230650564ULL,  670014898390ULL,  858993459532ULL,  515396075980ULL,  0ULL, 0ULL, 403726926003ULL, 455266533554ULL, 408021893304ULL, 498216206551ULL, 549755814217ULL, 335007449571ULL, 0ULL},
    };

    inline eval_t getEvalFromPacked (packed_eval_t packed, int phase) { // higher phase means closer to mg
        int mg = int(int16_t(packed >> 32 & 0xffff));
        int eg = int(int16_t(packed & 0xffff));
        return float(mg * phase + eg * (24 - phase)) / 24.0F;
    }
};